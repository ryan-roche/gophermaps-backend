{
  "listeners": {
    "*:8000": {
      "pass": "routes"
    },

    "*:8001": {
      "pass": "routes"
    },

    "*:443": {
      "ssl" : {},
      "pass": "routes"
    },
    
    "*:8443": {
      "ssl" : {},
      "pass": "routes"
    }
  },

  "routes": [
    {
      "match": {
        "method": "HEAD"
      },
      "action": {
        "return": 200
      }
    },

    {
      "match": {
        "method": "!GET"
      },
      "action": {
        "return": 501
      }
    },
    {
      "match": {
        "uri": [
          "/instructions/*",
          "/thumbnails/*"
        ]
      },
      "action": {
        "share": "/web/$uri"
      }
    },

    {
      "action": {
        "pass": "applications/fastapi"
      }
    }
  ],

  "applications": {
    "fastapi": {
      "type": "python3.12",
      "path": "/service/",
      "module": "main",
      "callable": "app"
    }
  }
}
